---
title: "List Lightning Payments"
description: "List all Lightning payments with pagination and filtering."
api: "GET https://api.bipa.app/v1/lightning/payments"
---

## Request

Retrieve a paginated list of Lightning payments.

### Query parameters

<ParamField query="limit" type="integer" default="20">
  Number of payments to return (1-100)
</ParamField>

<ParamField query="starting_after" type="string">
  Cursor for pagination. Use the `id` of the last payment.
</ParamField>

<ParamField query="ending_before" type="string">
  Cursor for reverse pagination.
</ParamField>

<ParamField query="customer_id" type="string">
  Filter by customer
</ParamField>

<ParamField query="type" type="string">
  Filter by type: `inbound` or `outbound`
</ParamField>

<ParamField query="status" type="string">
  Filter by status: `pending`, `completed`, `failed`, `expired`
</ParamField>

<ParamField query="created_after" type="string">
  Filter payments created after this ISO 8601 timestamp
</ParamField>

<ParamField query="created_before" type="string">
  Filter payments created before this ISO 8601 timestamp
</ParamField>

## Response

<ResponseField name="object" type="string">
  Always `list`
</ResponseField>

<ResponseField name="data" type="array">
  Array of Lightning payment objects
</ResponseField>

<ResponseField name="has_more" type="boolean">
  Whether more results exist
</ResponseField>

<ResponseField name="total_count" type="integer">
  Total number of payments matching filters
</ResponseField>

<RequestExample>
```bash cURL
# List all payments
curl "https://api.bipa.app/v1/lightning/payments?limit=20" \
  -H "Authorization: Bearer sk_live_..."

# Filter by customer and type
curl "https://api.bipa.app/v1/lightning/payments?customer_id=cus_abc123&type=inbound" \
  -H "Authorization: Bearer sk_live_..."

# Get completed payments from today
curl "https://api.bipa.app/v1/lightning/payments?status=completed&created_after=2024-01-15T00:00:00Z" \
  -H "Authorization: Bearer sk_live_..."
```

```python Python
import requests

# List all completed inbound payments (invoices paid)
response = requests.get(
    "https://api.bipa.app/v1/lightning/payments",
    headers={"Authorization": "Bearer sk_live_..."},
    params={
        "type": "inbound",
        "status": "completed",
        "limit": 50
    }
)

result = response.json()
print(f"Found {result['total_count']} paid invoices")

# Calculate total received
total_sats = sum(p["amount_sats"] for p in result["data"])
print(f"Total received: {total_sats:,} sats ({total_sats / 100_000_000:.8f} BTC)")
```

```javascript Node.js
// List recent Lightning activity
const params = new URLSearchParams({
  limit: "50",
  created_after: new Date(Date.now() - 24 * 60 * 60 * 1000).toISOString()
});

const response = await fetch(
  `https://api.bipa.app/v1/lightning/payments?${params}`,
  {
    headers: { "Authorization": "Bearer sk_live_..." }
  }
);

const { data: payments, total_count } = await response.json();

// Summarize by type
const summary = payments.reduce((acc, p) => {
  acc[p.type] = (acc[p.type] || 0) + p.amount_sats;
  return acc;
}, {});

console.log(`Last 24h: ${total_count} payments`);
console.log(`Inbound: ${summary.inbound?.toLocaleString() || 0} sats`);
console.log(`Outbound: ${summary.outbound?.toLocaleString() || 0} sats`);
```
</RequestExample>

<ResponseExample>
```json 200 OK
{
  "object": "list",
  "data": [
    {
      "id": "ln_pay_xyz789",
      "customer_id": "cus_a1b2c3d4e5f6",
      "type": "outbound",
      "payment_hash": "a1b2c3d4...",
      "amount_sats": 100000,
      "fee_sats": 10,
      "status": "completed",
      "description": "Coffee payment",
      "created_at": "2024-01-15T10:30:00Z",
      "completed_at": "2024-01-15T10:30:01Z"
    },
    {
      "id": "ln_inv_abc123",
      "customer_id": "cus_a1b2c3d4e5f6",
      "type": "inbound",
      "payment_hash": "b2c3d4e5...",
      "amount_sats": 50000,
      "status": "completed",
      "description": "Order #12345",
      "created_at": "2024-01-15T09:00:00Z",
      "completed_at": "2024-01-15T09:05:00Z"
    },
    {
      "id": "ln_inv_pending",
      "customer_id": "cus_a1b2c3d4e5f6",
      "type": "inbound",
      "payment_hash": "c3d4e5f6...",
      "amount_sats": 25000,
      "status": "pending",
      "description": "Pending order",
      "expires_at": "2024-01-15T12:00:00Z",
      "created_at": "2024-01-15T11:00:00Z"
    }
  ],
  "has_more": true,
  "total_count": 156
}
```
</ResponseExample>

## Analytics example

Generate Lightning payment statistics:

```python
from collections import defaultdict
from datetime import datetime, timedelta

def get_lightning_stats(customer_id: str = None, days: int = 30):
    """Generate Lightning payment statistics."""

    created_after = (datetime.now() - timedelta(days=days)).isoformat() + "Z"
    payments = []
    starting_after = None

    # Fetch all payments
    while True:
        params = {
            "created_after": created_after,
            "limit": 100
        }
        if customer_id:
            params["customer_id"] = customer_id
        if starting_after:
            params["starting_after"] = starting_after

        response = requests.get(
            "https://api.bipa.app/v1/lightning/payments",
            headers={"Authorization": "Bearer sk_live_..."},
            params=params
        ).json()

        payments.extend(response["data"])

        if not response["has_more"]:
            break
        starting_after = response["data"][-1]["id"]

    # Calculate statistics
    stats = {
        "inbound": {"count": 0, "total_sats": 0, "completed": 0},
        "outbound": {"count": 0, "total_sats": 0, "fees_sats": 0, "completed": 0}
    }

    for payment in payments:
        p_type = payment["type"]
        stats[p_type]["count"] += 1
        stats[p_type]["total_sats"] += payment["amount_sats"]

        if payment["status"] == "completed":
            stats[p_type]["completed"] += 1

        if p_type == "outbound" and payment.get("fee_sats"):
            stats[p_type]["fees_sats"] += payment["fee_sats"]

    return stats

# Generate report
stats = get_lightning_stats(days=30)

print("Lightning Statistics (30 days)")
print("-" * 40)
print(f"Invoices created: {stats['inbound']['count']}")
print(f"Invoices paid: {stats['inbound']['completed']}")
print(f"Total received: {stats['inbound']['total_sats']:,} sats")
print()
print(f"Payments sent: {stats['outbound']['count']}")
print(f"Payments completed: {stats['outbound']['completed']}")
print(f"Total sent: {stats['outbound']['total_sats']:,} sats")
print(f"Total fees: {stats['outbound']['fees_sats']:,} sats")
```

