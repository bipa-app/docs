---
title: "Create Transfer"
description: "Create an outbound on-chain transfer to an external blockchain address."
api: "POST https://api.bipa.tech/v1/onchain/transfers"
---

## Request

Create an outbound transfer to send cryptocurrency from a customer's balance to an external address.

### Transfer fees

<Tabs>
  <Tab title="USDT">
    | Network | Fee |
    |---------|-----|
    | Polygon | 1 USDT |
    | Arbitrum | 1 USDT |
    | Optimism | 1 USDT |
    | Tron | 1 USDT |
    | Ethereum | 3-25 USDT (dynamic based on gas prices) |
  </Tab>
  <Tab title="Bitcoin">
    Bitcoin transfer fees are **dynamic** based on current network congestion. All Bitcoin transfers are sent with **fast priority** to ensure quick confirmation.

    Fees typically range from 0.00001-0.0005 BTC depending on mempool conditions.
  </Tab>
</Tabs>

<Note>
  The fee is deducted from the customer's balance in addition to the transfer amount. The response includes `amount_gross` (total deducted), `amount_net` (amount received by destination), and `fee`.
</Note>

### Body parameters

<ParamField body="customer_id" type="string" required>
  Customer initiating the transfer
</ParamField>

<ParamField body="asset" type="string" required>
  Asset to transfer: `USDT` or `BTC`
</ParamField>

<ParamField body="network" type="string" required>
  Blockchain network:
  - For USDT: `polygon`, `arbitrum`, `optimism`, `tron`, `ethereum`
  - For BTC: `bitcoin`
</ParamField>

<ParamField body="amount" type="string" required>
  Amount to send in the asset's smallest unit (as string). This is the net amount the recipient will receive.
  - USDT: 6 decimals (e.g., `"100000000"` = 100 USDT)
  - BTC: 8 decimals (e.g., `"1000000"` = 0.01 BTC)
</ParamField>

<ParamField body="destination_address" type="string" required>
  External address to send funds to
</ParamField>

<ParamField body="idempotency_key" type="string" required>
  Unique key to prevent duplicate transfers
</ParamField>

<Warning>
  The customer must have sufficient balance. The `amount_gross` (amount + fee) will be deducted from their balance.
</Warning>

## Response

<ResponseField name="id" type="string">
  Unique transfer identifier
</ResponseField>

<ResponseField name="customer_id" type="string">
  Customer who initiated the transfer
</ResponseField>

<ResponseField name="direction" type="string">
  Transfer direction: `outbound`
</ResponseField>

<ResponseField name="asset" type="string">
  Asset being transferred
</ResponseField>

<ResponseField name="network" type="string">
  Blockchain network
</ResponseField>

<ResponseField name="amount_gross" type="string">
  Total amount deducted from customer balance in smallest unit (amount_net + fee)
</ResponseField>

<ResponseField name="amount_net" type="string">
  Amount the recipient will receive in smallest unit
</ResponseField>

<ResponseField name="fee" type="string">
  Network fee charged in smallest unit
</ResponseField>

<ResponseField name="decimals" type="integer">
  Decimal places for the asset (6 for USDT, 8 for BTC)
</ResponseField>

<ResponseField name="status" type="string">
  Transfer status: `pending`, `processing`, `confirmed`, `failed`
</ResponseField>

<ResponseField name="destination_address" type="string">
  Recipient address
</ResponseField>

<ResponseField name="tx_hash" type="string">
  Transaction hash (available after broadcast)
</ResponseField>

<ResponseField name="idempotency_key" type="string">
  Your idempotency key
</ResponseField>

<ResponseField name="created_at" type="string">
  ISO 8601 timestamp
</ResponseField>

<RequestExample>
```bash cURL - USDT Transfer (100 USDT)
curl -X POST https://api.bipa.tech/v1/onchain/transfers \
  -H "Authorization: Bearer bipa_live_sk_..." \
  -H "Content-Type: application/json" \
  -d '{
    "customer_id": "cus_a1b2c3d4e5f6",
    "asset": "USDT",
    "network": "polygon",
    "amount": "100000000",
    "destination_address": "0xabcdef1234567890abcdef1234567890abcdef12",
    "idempotency_key": "txn_unique_456"
  }'
```

```bash cURL - Bitcoin Transfer (0.01 BTC)
curl -X POST https://api.bipa.tech/v1/onchain/transfers \
  -H "Authorization: Bearer bipa_live_sk_..." \
  -H "Content-Type: application/json" \
  -d '{
    "customer_id": "cus_a1b2c3d4e5f6",
    "asset": "BTC",
    "network": "bitcoin",
    "amount": "1000000",
    "destination_address": "bc1qxy2kgdygjrsqtzq2n0yrf2493p83kkfjhx0wlh",
    "idempotency_key": "txn_btc_789"
  }'
```

```python Python
import requests
import uuid
from decimal import Decimal

def to_smallest_unit(human_amount: Decimal, decimals: int) -> str:
    """Convert human-readable amount to smallest unit string."""
    return str(int(human_amount * Decimal(10 ** decimals)))

# Send 100 USDT (6 decimals)
amount = to_smallest_unit(Decimal("100"), 6)  # "100000000"

response = requests.post(
    "https://api.bipa.tech/v1/onchain/transfers",
    headers={
        "Authorization": "Bearer bipa_live_sk_...",
        "Content-Type": "application/json"
    },
    json={
        "customer_id": "cus_a1b2c3d4e5f6",
        "asset": "USDT",
        "network": "polygon",
        "amount": amount,
        "destination_address": "0xabcdef1234567890abcdef1234567890abcdef12",
        "idempotency_key": f"txn_{uuid.uuid4()}"
    }
)

transfer = response.json()
decimals = transfer['decimals']
print(f"Transfer {transfer['id']}: {transfer['status']}")
print(f"Gross: {int(transfer['amount_gross']) / 10**decimals} USDT")
print(f"Net: {int(transfer['amount_net']) / 10**decimals} USDT")
print(f"Fee: {int(transfer['fee']) / 10**decimals} USDT")
```

```javascript Node.js
import { randomUUID } from "crypto";

// Helper to convert human amount to smallest unit
function toSmallestUnit(amount, decimals) {
  const [whole, fraction = ''] = amount.split('.');
  const paddedFraction = fraction.padEnd(decimals, '0').slice(0, decimals);
  return BigInt(whole + paddedFraction).toString();
}

// Send 100 USDT (6 decimals)
const amount = toSmallestUnit("100", 6); // "100000000"

const response = await fetch(
  "https://api.bipa.tech/v1/onchain/transfers",
  {
    method: "POST",
    headers: {
      "Authorization": "Bearer bipa_live_sk_...",
      "Content-Type": "application/json"
    },
    body: JSON.stringify({
      customer_id: "cus_a1b2c3d4e5f6",
      asset: "USDT",
      network: "polygon",
      amount,
      destination_address: "0xabcdef1234567890abcdef1234567890abcdef12",
      idempotency_key: `txn_${randomUUID()}`
    })
  }
);

const transfer = await response.json();
const divisor = 10n ** BigInt(transfer.decimals);
console.log(`Transfer ${transfer.id}: ${transfer.status}`);
console.log(`Gross: ${BigInt(transfer.amount_gross) / divisor} USDT`);
```
</RequestExample>

<ResponseExample>
```json 201 Created - USDT (100 USDT + 1 USDT fee)
{
  "id": "txn_xyz789",
  "customer_id": "cus_a1b2c3d4e5f6",
  "direction": "outbound",
  "asset": "USDT",
  "network": "polygon",
  "amount_gross": "101000000",
  "amount_net": "100000000",
  "fee": "1000000",
  "decimals": 6,
  "status": "pending",
  "destination_address": "0xabcdef1234567890abcdef1234567890abcdef12",
  "tx_hash": null,
  "idempotency_key": "txn_unique_456",
  "created_at": "2024-01-15T10:30:00Z"
}
```

```json 201 Created - Bitcoin (0.01 BTC + 0.00005 BTC fee)
{
  "id": "txn_btc123",
  "customer_id": "cus_a1b2c3d4e5f6",
  "direction": "outbound",
  "asset": "BTC",
  "network": "bitcoin",
  "amount_gross": "1005000",
  "amount_net": "1000000",
  "fee": "5000",
  "decimals": 8,
  "status": "pending",
  "destination_address": "bc1qxy2kgdygjrsqtzq2n0yrf2493p83kkfjhx0wlh",
  "tx_hash": null,
  "idempotency_key": "txn_btc_789",
  "created_at": "2024-01-15T10:30:00Z"
}
```

```json 400 Insufficient Balance
{
  "error": {
    "type": "invalid_request_error",
    "code": "insufficient_balance",
    "message": "Customer does not have sufficient USDT balance (need 101000000, have 50000000)",
    "param": "amount"
  }
}
```

```json 400 Invalid Address
{
  "error": {
    "type": "invalid_request_error",
    "code": "invalid_address",
    "message": "The destination address is not valid for the Polygon network",
    "param": "destination_address"
  }
}
```

```json 400 Transfers Disabled
{
  "error": {
    "type": "invalid_request_error",
    "code": "transfers_disabled",
    "message": "Outbound transfers are temporarily disabled for maintenance"
  }
}
```
</ResponseExample>

## Address validation

Bipa validates destination addresses before processing:

- **Ethereum-compatible**: Checksum validation
- **Bitcoin**: Bech32 (bc1...) and legacy (1..., 3...) formats
- **Tron**: Base58 format starting with T

<Warning>
  Always confirm the network and address with your user before submitting. Transactions to incorrect addresses cannot be reversed.
</Warning>

