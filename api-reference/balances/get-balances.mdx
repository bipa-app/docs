---
title: "Get Balances"
description: "Retrieve current balances for a customer."
api: "GET https://api.bipa.app/v1/customers/{customer_id}/balances"
---

## Request

Retrieve the current balances for a customer across all supported currencies.

### Path parameters

<ParamField path="customer_id" type="string" required>
  The customer ID to retrieve balances for
</ParamField>

## Response

<ResponseField name="customer_id" type="string">
  Customer identifier
</ResponseField>

<ResponseField name="balances" type="object">
  Balance objects keyed by currency
  <Expandable title="balance object">
    <ResponseField name="available" type="string">
      Available balance
    </ResponseField>
    <ResponseField name="pending" type="string">
      Pending balance (awaiting confirmation)
    </ResponseField>
    <ResponseField name="currency" type="string">
      Currency code
    </ResponseField>
    <ResponseField name="decimals" type="integer">
      Decimal places for formatting
    </ResponseField>
  </Expandable>
</ResponseField>

<ResponseField name="updated_at" type="string">
  ISO 8601 timestamp of last balance update
</ResponseField>

<RequestExample>
```bash cURL
curl https://api.bipa.app/v1/customers/cus_a1b2c3d4e5f6/balances \
  -H "Authorization: Bearer sk_live_..."
```

```python Python
import requests

response = requests.get(
    "https://api.bipa.app/v1/customers/cus_a1b2c3d4e5f6/balances",
    headers={"Authorization": "Bearer sk_live_..."}
)

balances = response.json()

# Display formatted balances
for currency, balance in balances["balances"].items():
    available = float(balance["available"])
    pending = float(balance["pending"])
    decimals = balance["decimals"]

    # BRL is stored in cents
    if currency == "BRL":
        available /= 100
        pending /= 100

    print(f"{currency}: {available:.{decimals}f} (pending: {pending:.{decimals}f})")
```

```javascript Node.js
const response = await fetch(
  "https://api.bipa.app/v1/customers/cus_a1b2c3d4e5f6/balances",
  {
    headers: { "Authorization": "Bearer sk_live_..." }
  }
);

const { balances } = await response.json();

// Display formatted balances
for (const [currency, balance] of Object.entries(balances)) {
  let available = parseFloat(balance.available);
  let pending = parseFloat(balance.pending);

  // BRL is stored in cents
  if (currency === "BRL") {
    available /= 100;
    pending /= 100;
  }

  console.log(`${currency}: ${available.toFixed(balance.decimals)} (pending: ${pending.toFixed(balance.decimals)})`);
}
```
</RequestExample>

<ResponseExample>
```json 200 OK
{
  "customer_id": "cus_a1b2c3d4e5f6",
  "balances": {
    "BRL": {
      "available": "150000",
      "pending": "50000",
      "currency": "BRL",
      "decimals": 2
    },
    "USDT": {
      "available": "245.67",
      "pending": "100.00",
      "currency": "USDT",
      "decimals": 2
    },
    "BTC": {
      "available": "0.05234567",
      "pending": "0.01000000",
      "currency": "BTC",
      "decimals": 8
    }
  },
  "updated_at": "2024-01-15T10:30:00Z"
}
```

```json 200 OK - New Customer (Zero Balances)
{
  "customer_id": "cus_new123",
  "balances": {
    "BRL": {
      "available": "0",
      "pending": "0",
      "currency": "BRL",
      "decimals": 2
    },
    "USDT": {
      "available": "0.00",
      "pending": "0.00",
      "currency": "USDT",
      "decimals": 2
    },
    "BTC": {
      "available": "0.00000000",
      "pending": "0.00000000",
      "currency": "BTC",
      "decimals": 8
    }
  },
  "updated_at": "2024-01-15T10:30:00Z"
}
```

```json 404 Not Found
{
  "error": {
    "type": "invalid_request_error",
    "code": "customer_not_found",
    "message": "No customer found with ID cus_a1b2c3d4e5f6"
  }
}
```
</ResponseExample>

## Checking sufficient balance

Before executing operations, verify sufficient balance:

```python
def has_sufficient_balance(customer_id: str, currency: str, amount: float) -> bool:
    """Check if customer has sufficient available balance."""

    response = requests.get(
        f"https://api.bipa.app/v1/customers/{customer_id}/balances",
        headers={"Authorization": "Bearer sk_live_..."}
    )

    balances = response.json()["balances"]

    if currency not in balances:
        return False

    available = float(balances[currency]["available"])

    # BRL is stored in cents
    if currency == "BRL":
        available /= 100

    return available >= amount

# Usage
if has_sufficient_balance("cus_abc123", "USDT", 100.00):
    # Proceed with trade or withdrawal
    pass
else:
    # Handle insufficient balance
    pass
```

## Portfolio valuation

Calculate total portfolio value in BRL:

```python
def get_portfolio_value_brl(customer_id: str) -> float:
    """Calculate total portfolio value in BRL."""

    # Get balances
    balances = requests.get(
        f"https://api.bipa.app/v1/customers/{customer_id}/balances",
        headers={"Authorization": "Bearer sk_live_..."}
    ).json()["balances"]

    # Get current rates
    rates = {}
    for pair in ["USDT-BRL", "BTC-BRL"]:
        quote = requests.get(
            "https://api.bipa.app/v1/quotes",
            headers={"Authorization": "Bearer sk_live_..."},
            params={"from": pair.split("-")[0], "to": "BRL", "amount": "1"}
        ).json()
        rates[pair.split("-")[0]] = float(quote["to_amount_cents"]) / 100

    total_brl = 0

    # BRL balance
    total_brl += float(balances["BRL"]["available"]) / 100

    # USDT converted to BRL
    usdt_balance = float(balances["USDT"]["available"])
    total_brl += usdt_balance * rates["USDT"]

    # BTC converted to BRL
    btc_balance = float(balances["BTC"]["available"])
    total_brl += btc_balance * rates["BTC"]

    return total_brl

portfolio_value = get_portfolio_value_brl("cus_abc123")
print(f"Portfolio value: R$ {portfolio_value:,.2f}")
```

